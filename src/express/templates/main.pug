extends layout.pug

block content
  main.main-page
    h1.visually-hidden Ð“Ð»Ð°Ð²Ð½Ð°Ñ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ð° Ð»Ð¸Ñ‡Ð½Ð¾Ð³Ð¾ Ð±Ð»Ð¾Ð³Ð° Ð¢Ð¸Ð¿Ð¾Ñ‚ÐµÐºÐ°
    p
      | Ð­Ñ‚Ð¾ Ð¿Ñ€Ð¸Ð²ÐµÑ‚ÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ð¹ Ñ‚ÐµÐºÑÑ‚, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð²Ð»Ð°Ð´ÐµÐ»ÐµÑ† Ð±Ð»Ð¾Ð³Ð° Ð¼Ð¾Ð¶ÐµÑ‚ Ð²Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¾Ð¿Ð¸ÑÐ°Ñ‚ÑŒ ÑÐµÐ±Ñ ðŸ‘
    if !posts.length
      .main-page__empty-wrapper
        p.main-page__empty-text Ð—Ð´ÐµÑÑŒ Ð¿Ð¾ÐºÐ° Ð¿ÑƒÑÑ‚Ð¾!

    if posts.length
      section.main-page__theme-list
        h2.visually-hidden Ð¡Ð¿Ð¸ÑÐ¾Ðº Ñ‚ÐµÐ¼
        ul.themes
          each category in categories
            if category.count > 0
              li.themes__item
                a.themes__item-link(href=`articles/category/${category.id}`) #{category.name} !{' '}
                  sup #{category.count}
      .main-page__section-flex
        section.main-page__hot.hot
          h2.hot__name
            | Ð¡Ð°Ð¼Ð¾Ðµ Ð¾Ð±ÑÑƒÐ¶Ð´Ð°ÐµÐ¼Ð¾Ðµ&#32;
            span.hot__icon.hot__icon--fire
          if postInTrends
            ul.hot__list
              each postInTrend in postInTrends
                li.hot__list-item
                  a.hot__list-link(href=`/articles/${postInTrend.id}`)
                    | #{formatAnnounce(postInTrend.announce)}
                    sup.hot__link-sup #{postInTrend.comments.length}
          if !postInTrends.length
            p.last__empty Ð—Ð´ÐµÑÑŒ Ð¿Ð¾ÐºÐ° Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ð½ÐµÑ‚...
        section.main-page__last.last
          h2.last__name
            | ÐŸÐ¾ÑÐ»ÐµÐ´Ð½Ð¸Ðµ ÐºÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸Ð¸&#32;
            span.last__icon.last__icon--cloud
          if commentsInTrends.length
            ul.last__list
              each comment in commentsInTrends
                li.last__list-item
                  img.last__list-image(src=`/img/${comment.users.avatar}` width='20' height='20' alt='ÐÐ²Ð°Ñ‚Ð°Ñ€ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ')
                  b.last__list-name #{comment.users.firstName} #{comment.users.lastName}
                  a.last__list-link(href=`articles/${comment.posts.id}`)
                    | #{formatAnnounce(comment.text)}
          if !commentsInTrends.length
            p.last__empty Ð—Ð´ÐµÑÑŒ Ð¿Ð¾ÐºÐ° Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ð½ÐµÑ‚...
      section.main-page__list.preview
        h2.visually-hidden Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð¿Ñ€ÐµÐ²ÑŒÑŽ ÑÑ‚Ð°Ñ‚ÐµÐ¹
        ul.preview__list
          each post in posts
            li.preview__item
              ul.preview__breadcrumbs
                each category in post.categories
                  li.preview__breadcrumbs-item
                    a.preview__breadcrumbs-link(href=`/articles/category/${category.id}`) #{category.name}
              if (post.picture)
                .preview__background
                  img.preview__background-image(src=`/img/${post.picture}` width='460' height='240' alt='Ð¤Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ñ Ð½ÐµÐ±Ð¾ÑÐºÑ€ÐµÐ±Ð°')
              time.preview__time(datetime=`${post.createdDate}`) #{formatPostDate(post.createdDate)}
              h3.preview__name
                a.preview__name-link(href=`/articles/${post.id}`) #{post.title}
              p.preview__text #{post.announce}
              a.preview__comment(href='/my/comments')
                | ÐšÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸Ð¸
                span.preview__cloud
                if post.comments.length > 0
                  b.preview__comment-count !{' '}#{post.comments.length}
      +pagination(page, totalPages, 2, `?`)
